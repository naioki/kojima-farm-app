# Streamlit実行手順

## 1. 必要な設定

### APIキーの設定

`.streamlit/secrets.toml` ファイルを作成して、以下の内容を設定してください：

```toml
COMPANY_NAME = "(株)アイプラス"
GEMINI_API_KEY = "your-gemini-api-key-here"
```

### OCR設定（オプション）

OCR機能を使用する場合は、Tesseract OCRをインストールしてください。

**Windows:**
- [Tesseract OCR](https://github.com/UB-Mannheim/tesseract/wiki)をダウンロードしてインストール
- 日本語データ（jpn.traineddata）が含まれていることを確認

**macOS:**
```bash
brew install tesseract tesseract-lang
```

**Linux:**
```bash
sudo apt-get install tesseract-ocr tesseract-ocr-jpn
```

## 2. 実行方法

### ローカルで実行

```bash
cd kojima-farm-app
streamlit run app.py
```

ブラウザが自動的に開き、`http://localhost:8501` でアプリが起動します。

### Streamlit Cloudで実行

1. GitHubリポジトリをStreamlit Cloudに接続
2. Secretsに以下を設定：
   - `COMPANY_NAME`: (株)アイプラス
   - `GEMINI_API_KEY`: あなたのGemini APIキー

## 3. 使用方法

### タブ1: 画像解析
1. 注文画像をアップロード
2. 「🔍 AI解析を実行」ボタンをクリック
3. 結果を確認・編集
4. 「📄 PDFを生成」ボタンでPDFを生成

### タブ2: メール自動読み取り
1. IMAPサーバー、メールアドレス、パスワードを入力
2. 「📬 メールをチェック」ボタンをクリック
3. 取得した画像から解析したいものを選択

### タブ3: 設定管理
1. 店舗名・品目名を追加・削除
2. 新しい店舗・品目は自動学習されます

## 4. トラブルシューティング

### APIキーエラー
- `.streamlit/secrets.toml` が正しく設定されているか確認
- Gemini APIキーが有効か確認

### OCRエラー
- Tesseract OCRがインストールされているか確認
- 日本語データが含まれているか確認
- OCRが失敗しても、画像解析に自動的にフォールバックされます

### メール読み取りエラー
- IMAPサーバー設定が正しいか確認
- メールアドレスとパスワードが正しいか確認
- Gmailの場合は「アプリパスワード」を使用してください
